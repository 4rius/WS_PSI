<!DOCTYPE html>
<html>
<head>
    <title>Inicio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
    <h1>Dispositivos conectados - Puerto de la red: </h1>
    <div id="devices"></div>
    <script>
    $(document).ready(function(){
    $.getJSON('/api/devices', function(data){
        $.each(data, function(key, value){
            $('#devices').append('<p>' + key + ': Last seen: ' + value + ' <button onclick="ping(\'' + key + '\')">Ping</button></p>');
        });
        });
    });

    function ping(device) {
        $.get('/api/ping/' + device, function(data){
            alert(data.status);  // Accede a la propiedad 'status' del objeto JSON
        });
    }

    </script>

    <form action="/metrics">
        <label for="implementation">Elige una implementación:</label>
        <select id="implementation" name="implementation">
            <option value="imp1">Paillier</option>
            <option value="imp2">TBD</option>
            <option value="imp3">TBD</option>
        </select>
        <input type="submit" value="Confirmar">
    </form>

    <button onclick="location.href='/metrics'">Ver métricas</button>
    <button onclick="location.href='/api/connect'" formmethod="post">Conectar</button>
    <button onclick="location.href='/api/disconnect'" formmethod="post">Desconectar</button>
</body>
</html>
